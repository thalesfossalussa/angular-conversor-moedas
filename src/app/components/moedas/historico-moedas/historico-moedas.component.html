<div class="container">
  <h2 class="text-center my-4">Histórico de conversões</h2>
  <main>
    <div class="row">
      <div class="col mb-4">
        <table mat-table matSort [dataSource]="historico" class="mat-elevation-z8">

          <ng-container matColumnDef="data">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Data </th>
            <td mat-cell *matCellDef="let conversao"> {{ conversao.data | date: 'dd/MM/yyyy' }} </td>
          </ng-container>

          <ng-container matColumnDef="hora">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Hora </th>
            <td mat-cell *matCellDef="let conversao"> {{conversao.data | date: 'HH:mm'}} </td>
          </ng-container>

          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Entrada </th>
            <td mat-cell *matCellDef="let conversao">{{conversao.amount}} {{conversao.from}}</td>
          </ng-container>

          <ng-container matColumnDef="result">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Saída </th>
            <td mat-cell *matCellDef="let conversao">
              <span class="align-middle h-100">
                {{conversao.result}} {{conversao.to}}
                <mat-icon
                  *ngIf="conversao.valorSuperior"
                  aria-hidden="false"
                  aria-label="Valor superior a 10 mil doláres"
                  fontIcon="attach_money"
                ></mat-icon>
              </span>

            </td>
          </ng-container>

          <ng-container matColumnDef="rate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Taxa de conversão </th>
            <td mat-cell *matCellDef="let conversao"> {{conversao.rate}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: tableColumns;"></tr>
        </table>

        <mat-paginator
          [pageSizeOptions]="[5, 10, 20]"
          showFirstLastButtons
          aria-label="Selecione a página de Conversões"
        ></mat-paginator>

      </div>

      <div class="row">
        <div class="col">

          <button
            type="submit"
            mat-raised-button
            color="warn"
            class="position-relative start-50 translate-middle my-2"
            data-bs-toggle="modal"
            data-bs-target="#excluirHistoricoModal"
            >
            Excluir histórico
          </button>
        </div>
      </div>

      <!-- Modal para confirmar exclusão -->
      <div class="modal fade" id="excluirHistoricoModal" tabindex="-1" aria-labelledby="excluirHistoricoModal" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" >Excluir Histórico</h1>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Tem certeza que deseja apagar o histórico de conversões?
            </div>
            <div class="modal-footer">
              <button mat-raised-button data-bs-dismiss="modal">Cancelar</button>
              <button mat-raised-button color="warn" (click)="excluirHistorico()" data-bs-dismiss="modal">Excluir</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>
